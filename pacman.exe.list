EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
pacman.exe -- emu8086 assembler version: 4.08  
 
[ 19/04/2014  --  01:00:25 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       ; multi-segment executable file template.
[   2]        :                                       
[   3]        :                                       data segment
[   4]        :                                       ; add your data here!
[   5]        :                                       
[   6]        :                                       ;the maze
[   7]    0000: 23 23 23 23 23 23 23 23 23 23 23 23   MazeLine1  db "#######################################################"
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23                
[   8]    0037: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   MazeLine2  db "# . . . . . . . . . . . . ### . . . . . . . . . . . . #"
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23                
[   9]    006E: 23 20 2E 20 23 23 23 23 23 23 23 20   MazeLine3  db "# . ####### . ######### . ### . ######### . ####### . #"
                2E 20 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 2E 20 23                
[  10]    00A5: 23 20 50 20 23 23 23 23 23 23 23 20   MazeLine4  db "# P ####### . ######### . ### . ######### . ####### P #"
                2E 20 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 50 20 23                
[  11]    00DC: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   MazeLine5  db "# . . . . . . . . . . . . . . . . . . . . . . . . . . #"
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23                
[  12]    0113: 23 20 2E 20 23 23 23 23 23 23 23 20   MazeLine6  db "# . ####### . ### . ############### . ### . ####### . #"
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 2E 20 23                
[  13]    014A: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   MazeLine7  db "# . . . . . . ### . . . . ### . . . . ### . . . . . . #"
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23                
[  14]    0181: 23 23 23 23 23 23 23 20 2E 20 23 20   MazeLine8  db "####### . # . #########   ###   ######### . # . #######"
                2E 20 23 23 23 23 23 23 23 23 23 20 
                20 20 23 23 23 20 20 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  15]    01B8: 23 23 23 23 23 23 23 20 2E 20 23 20   MazeLine9  db "####### . # . ###                     ### . # . #######"
                2E 20 23 23 23 20 20 20 20 20 20 20 
                20 20 20 20 20 20 20 20 20 20 20 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  16]    01EF: 23 23 23 23 23 23 23 20 2E 20 23 20   MazeLine10 db "####### . # . ###   ##### - - #####   ### . # . #######"
                2E 20 23 23 23 20 20 20 23 23 23 23 
                23 20 2D 20 2D 20 23 23 23 23 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  17]    0226: 23 23 23 23 23 23 23 20 2E 20 20 20   MazeLine11 db "####### .   . ###   #   H H H H   #   ### . # . #######"
                2E 20 23 23 23 20 20 20 23 20 20 20 
                48 20 48 20 48 20 48 20 20 20 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  18]    025D: 23 23 23 23 23 23 23 20 2E 20 23 20   MazeLine12 db "####### . # . ###   #   H H H H   #   ### . # . #######"
                2E 20 23 23 23 20 20 20 23 20 20 20 
                48 20 48 20 48 20 48 20 20 20 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  19]    0294: 23 23 23 23 23 23 23 20 2E 20 23 20   MazeLine13 db "####### . # . ###   ###############   ### . # . #######"
                2E 20 23 23 23 20 20 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  20]    02CB: 23 23 23 23 23 23 23 20 2E 20 23 20   MazeLine14 db "####### . # . ###          @          ### . # . #######"
                2E 20 23 23 23 20 20 20 20 20 20 20 
                20 20 20 40 20 20 20 20 20 20 20 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  21]    0302: 23 23 23 23 23 23 23 20 2E 20 23 20   MazeLine15 db "####### . # . ###   ##################### . # . #######"
                2E 20 23 23 23 20 20 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23                
[  22]    0339: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   MazeLine16 db "# . . . . . . . . . . . . ### . . . . . . . . . . . . #"
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23                
[  23]    0370: 23 20 2E 20 23 23 23 23 23 23 23 20   MazeLine17 db "# . ####### . ######### . ### . ######### . ####### . #"
                2E 20 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 2E 20 23                
[  24]    03A7: 23 20 50 20 2E 20 2E 20 23 23 23 20   MazeLine18 db "# P . . ### . . . . . . .  . . . . . . .. . ### . . P #"
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 20 2E 20 2E 20 2E 20 2E 20 2E 
                20 2E 20 2E 2E 20 2E 20 23 23 23 20 
                2E 20 2E 20 50 20 23                
[  25]    03DE: 23 23 23 23 23 20 2E 20 23 23 23 20   MazeLine19 db "##### . ### . ### . ############### . ### . ### . #####"
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 20 
                2E 20 23 23 23 23 23                
[  26]    0415: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   MazeLine20 db "# . . . . . . ### . . . . ### . . . . ### . . . . . . #"
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23                
[  27]    044C: 23 20 2E 20 23 23 23 23 23 23 23 23   MazeLine21 db "# . ################### . ### . ################### . #"
                23 23 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 20 2E 20 23                
[  28]    0483: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   MazeLine22 db "# . . . . . . . . . . . . . . . . . . . . . . . . . . #"
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23                
[  29]    04BA: 23 23 23 23 23 23 23 23 23 23 23 23   MazeLine23 db "#######################################################","$"
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 24             
[  30]        :                                       
[  31]        :                                       ;STUIPD MAZE
[  32]    04F2: 25 23 23 23 23 23 23 23 23 23 23 23   SMazeLine1  db "%######################################################",0dh, 0ah
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 0D 0A          
[  33]    052B: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   SMazeLine2  db "# . . . . . . . . . . . . ### . . . . . . . . . . . . #",0dh, 0ah
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23 0D 0A          
[  34]    0564: 23 20 2E 20 23 23 23 23 23 23 23 20   SMazeLine3  db "# . ####### . ######### . ### . ######### . ####### . #",0dh, 0ah
                2E 20 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 2E 20 23 0D 0A          
[  35]    059D: 23 20 50 20 23 23 23 23 23 23 23 20   SMazeLine4  db "# P ####### . ######### . ### . ######### . ####### P #",0dh, 0ah
                2E 20 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 50 20 23 0D 0A          
[  36]    05D6: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   SMazeLine5  db "# . . . . . . . . . . . . . . . . . . . . . . . . . . #",0dh, 0ah
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23 0D 0A          
[  37]    060F: 23 20 2E 20 23 23 23 23 23 23 23 20   SMazeLine6  db "# . ####### . ### . ############### . ### . ####### . #",0dh, 0ah
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 2E 20 23 0D 0A          
[  38]    0648: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   SMazeLine7  db "# . . . . . . ### . . . . ### . . . . ### . . . . . . #",0dh, 0ah
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23 0D 0A          
[  39]    0681: 23 23 23 23 23 23 23 20 2E 20 23 20   SMazeLine8  db "####### . # . #########   ###   ######### . # . #######",0dh, 0ah
                2E 20 23 23 23 23 23 23 23 23 23 20 
                20 20 23 23 23 20 20 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A          
[  40]    06BA: 23 23 23 23 23 23 23 20 2E 20 23 20   SMazeLine9  db "####### . # . ###                     ### . # . #######",0dh, 0ah
                2E 20 23 23 23 20 20 20 20 20 20 20 
                20 20 20 20 20 20 20 20 20 20 20 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A          
[  41]    06F3: 23 23 23 23 23 23 23 20 2E 20 23 20   SMazeLine10 db "####### . # . ###   ##### - - #####   ### . # . #######",0dh, 0ah
                2E 20 23 23 23 20 20 20 23 23 23 23 
                23 20 2D 20 2D 20 23 23 23 23 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A          
[  42]    072C: 23 23 23 23 23 23 23 20 2E 20 20 20   SMazeLine11 db "####### .   . ###   #   H H H H   #   ### . # . #######",0dh, 0ah
                2E 20 23 23 23 20 20 20 23 20 20 20 
                48 20 48 20 48 20 48 20 20 20 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A          
[  43]    0765: 23 23 23 23 23 23 23 20 2E 20 23 20   SMazeLine12 db "####### . # . ###   #   & & & &   #   ### . # . #######",0dh, 0ah,"$"
                2E 20 23 23 23 20 20 20 23 20 20 20 
                26 20 26 20 26 20 26 20 20 20 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A 24       
[  44]    079F: 23 23 23 23 23 23 23 20 2E 20 23 20   SMazeLine13 db "####### . # . ###   ###############   ### . # . #######",0dh, 0ah
                2E 20 23 23 23 20 20 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A          
[  45]    07D8: 23 23 23 23 23 23 23 20 2E 20 23 20   SMazeLine14 db "####### . # . ###          @          ### . # . #######",0dh, 0ah
                2E 20 23 23 23 20 20 20 20 20 20 20 
                20 20 20 40 20 20 20 20 20 20 20 20 
                20 20 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A          
[  46]    0811: 23 23 23 23 23 23 23 20 2E 20 23 20   SMazeLine15 db "####### . # . ###   ##################### . # . #######",0dh, 0ah
                2E 20 23 23 23 20 20 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 20 2E 20 
                23 23 23 23 23 23 23 0D 0A          
[  47]    084A: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   SMazeLine16 db "# . . . . . . . . . . . . ### . . . . . . . . . . . . #",0dh, 0ah
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23 0D 0A          
[  48]    0883: 23 20 2E 20 23 23 23 23 23 23 23 20   SMazeLine17 db "# . ####### . ######### . ### . ######### . ####### . #",0dh, 0ah
                2E 20 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 20 2E 20 23 0D 0A          
[  49]    08BC: 23 20 50 20 2E 20 2E 20 23 23 23 20   SMazeLine18 db "# P . . ### . . . . . . .  . . . . . . .. . ### . . P #",0dh, 0ah
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 20 2E 20 2E 20 2E 20 2E 20 2E 
                20 2E 20 2E 2E 20 2E 20 23 23 23 20 
                2E 20 2E 20 50 20 23 0D 0A          
[  50]    08F5: 23 23 23 23 23 20 2E 20 23 23 23 20   SMazeLine19 db "##### . ### . ### . ############### . ### . ### . #####",0dh, 0ah
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 20 
                2E 20 23 23 23 23 23 0D 0A          
[  51]    092E: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   SMazeLine20 db "# . . . . . . ### . . . . ### . . . . ### . . . . . . #",0dh, 0ah
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 23 23 23 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23 0D 0A          
[  52]    0967: 23 20 2E 20 23 23 23 23 23 23 23 23   SMazeLine21 db "# . ################### . ### . ################### . #",0dh, 0ah
                23 23 23 23 23 23 23 23 23 23 23 20 
                2E 20 23 23 23 20 2E 20 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 20 2E 20 23 0D 0A          
[  53]    09A0: 23 20 2E 20 2E 20 2E 20 2E 20 2E 20   SMazeLine22 db "# . . . . . . . . . . . . . . . . . . . . . . . . . . #",0dh, 0ah
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 2E 20 2E 20 2E 20 
                2E 20 2E 20 2E 20 23 0D 0A          
[  54]    09D9: 23 23 23 23 23 23 23 23 23 23 23 23   SMazeLine23 db "#######################################################",0dh, 0ah,"$"
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 23 23 23 23 23 
                23 23 23 23 23 23 23 0D 0A 24       
[  55]        :                                       
[  56]        :                                       
[  57]        :                                       
[  58]        :                                       ;pacman's initial coordinates
[  59]    0A13: 0D                                    PlayerRow db 13
[  60]    0A14: 1B                                    PlayerCol db 27
[  61]        :                                       
[  62]    0A15: 00                                    LastMove  db ?
[  63]        :                                       
[  64]        :                                       ;AIs' initial coordinates
[  65]        :                                       ;AI: 0 |1 |2 |3
[  66]    0A16: 0B 0B 0B 0B                           AIRow db 11,11,11,11
[  67]    0A1A: 18 1A 1C 1E                           AICol db 24,26,28,30
[  68]        :                                       
[  69]    0A1E: 01 01 01 01                           LastAIMove db 1,1,1,1
[  70]    0A22: 2E 2E 2E 2E                           LastOn db 4 dup('.')
[  71]        :                                       ;number of . to collect
[  72]    0A26: E0                                    Points db 224
[  73]        :                                       
[  74]        :                                       ends
[  75]        :                                       
[  76]        :                                       stack segment
[  77]    0A30: 00 00 00 00 00 00 00 00 00 00 00 00   dw   128  dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00                         
[  78]        :                                       ends
[  79]        :                                       
[  80]        :                                       code segment
[  81]    0B30:                                       start:
[  82]        :                                       ; set segment registers:
[  83]    0B30: B8 00 00                              mov ax, data
[  84]    0B33: 8E D8                                 mov ds, ax
[  85]    0B35: 8E C0                                 mov es, ax
[  86]        :                                       
[  87]        :                                       ; add your code here
[  88]        :                                       
[  89]    0B37: B0 03                                 mov al, 03h ;set console's mode (24x79)
[  90]    0B39: B4 00                                 mov ah, 0
[  91]    0B3B: CD 10                                 int 10h
[  92]        :                                       
[  93]    0B3D: B5 20                                 mov ch, 32
[  94]    0B3F: B4 01                                 mov ah, 1
[  95]    0B41: CD 10                                 int 10h     ;removes blinking cursor
[  96]        :                                       
[  97]    0B43: E8 2E 00                              call PrintMaze
[  98]        :                                       
[  99]        :                                       ;call StuipdPrintMaze ;fast maze prinitng for debugging
[ 100]        :                                       
[ 101]    0B46:                                       Game:
[ 102]    0B46: E8 F8 00                              call PlayerMove
[ 103]    0B49: E8 AB 01                              call AIMove
[ 104]    0B4C: EB F8                                 JMP Game
[ 105]        :                                       
[ 106]        :                                       ; wait for any key....
[ 107]    0B4E: B4 01                                 mov ah, 1
[ 108]    0B50: CD 21                                 int 21h
[ 109]        :                                       
[ 110]    0B52: B8 00 4C                              mov ax, 4c00h ; exit to operating system.
[ 111]    0B55: CD 21                                 int 21h
[ 112]        :                                       
[ 113]    0B57:                                       proc StuipdPrintMaze
[ 114]        :                                       ;  /**
[ 115]        :                                       ;  * proc prints maze without colors,
[ 116]        :                                       ;  * for swift print for debug purposes
[ 117]        :                                       ;  **/
[ 118]    0B57: 55                                    push bp
[ 119]    0B58: 8B EC                                 mov bp,sp
[ 120]        :                                       
[ 121]    0B5A: 50                                    push ax
[ 122]    0B5B: 51                                    push cx
[ 123]    0B5C: 52                                    push dx
[ 124]        :                                       
[ 125]    0B5D: B0 00                                 mov al, 0     ;set active page 0
[ 126]    0B5F: B4 05                                 mov ah, 05h
[ 127]    0B61: CD 10                                 int 10h       ;set page
[ 128]        :                                       
[ 129]    0B63: BA F2 04                              	lea dx, SMazeLine1  ;prints lines 1-12
[ 130]    0B66: B4 09                                 	mov ah, 9
[ 131]    0B68: CD 21                                 	int 21h
[ 132]        :                                       	
[ 133]    0B6A: BA 9F 07                              	lea dx, SMazeLine13 ;print lines 12-23
[ 134]    0B6D: CD 21                                 	int 21h
[ 135]        :                                       	
[ 136]    0B6F: 5A                                    	pop dx
[ 137]    0B70: 59                                    	pop cx
[ 138]    0B71: 58                                    	pop ax
[ 139]        :                                       	
[ 140]    0B72: 5D                                    	pop bp
[ 141]    0B73: C3                                    ret
[ 142]        :                                       endp
[ 143]        :                                       
[ 144]    0B74:                                       proc PrintMaze
[ 145]        :                                       ;/**
[ 146]        :                                       ;  * This proc prints the whole maze,
[ 147]        :                                       ;  * and colors is according to its chars:
[ 148]        :                                       ;  * # - Blue, . - Yellow, @ - Orange
[ 149]        :                                       ;  * Maze Dimensions: 46x24 Chars
[ 150]        :                                       ;  * Emulator prints maze in 14.27 seconds
[ 151]        :                                       ;**/
[ 152]        :                                       
[ 153]    0B74: 55                                    push bp
[ 154]    0B75: 8B EC                                 mov bp,sp
[ 155]        :                                       
[ 156]    0B77: 50                                    push ax
[ 157]    0B78: 53                                    push bx
[ 158]    0B79: 51                                    push cx
[ 159]    0B7A: 56                                    push si
[ 160]        :                                       
[ 161]    0B7B: BE FF FF                              mov si, -1
[ 162]    0B7E:                                       print:
[ 163]    0B7E: 46                                    inc si
[ 164]    0B7F: 8A 04                                 mov al, MazeLine1[si]     ;get char to print
[ 165]        :                                       
[ 166]    0B81: 80 3C 23                              cmp MazeLine1[si], '#'
[ 167]    0B84: 74 0E                                 JE Blue
[ 168]    0B86: 80 3C 2E                              cmp MazeLine1[si], '.'
[ 169]    0B89: 74 0D                                 JE Yellow
[ 170]    0B8B: 80 3C 40                              cmp MazeLine1[si], '@'
[ 171]    0B8E: 74 0C                                 JE Orange
[ 172]        :                                       
[ 173]    0B90: B3 00                                 mov bl, 00h               ;set color black
[ 174]        :                                       
[ 175]    0B92: EB 0C                                 JMP ResumePrint
[ 176]        :                                       
[ 177]    0B94:                                       Blue:
[ 178]    0B94: B3 99                                 mov bl, 99h           ;set color light blue
[ 179]    0B96: EB 08                                 JMP ResumePrint
[ 180]        :                                       
[ 181]    0B98:                                       Yellow:
[ 182]    0B98: B3 0E                                 mov bl, 0eh           ;set color yellow
[ 183]    0B9A: EB 04                                 JMP ResumePrint
[ 184]        :                                       
[ 185]    0B9C:                                       Orange:
[ 186]    0B9C: B3 0C                                 mov bl, 0ch           ;set color light red
[ 187]    0B9E: EB 00                                 JMP ResumePrint
[ 188]        :                                       
[ 189]    0BA0:                                       ResumePrint:
[ 190]    0BA0: B9 01 00                              mov cx, 1             ;how many times to print
[ 191]    0BA3: B4 09                                 mov ah, 09h
[ 192]    0BA5: CD 10                                 int 10h               ;print char
[ 193]        :                                       
[ 194]    0BA7: E8 0B 00                              call MoveCursor
[ 195]        :                                       
[ 196]    0BAA: 80 3C 24                              cmp MazeLine1[si], '$'    ;print char untill terminator ('$')
[ 197]    0BAD: 75 CF                                 JNE print
[ 198]        :                                       
[ 199]    0BAF: 5E                                    pop si
[ 200]    0BB0: 5B                                    pop bx
[ 201]    0BB1: 59                                    pop cx
[ 202]    0BB2: 58                                    pop ax
[ 203]        :                                       
[ 204]    0BB3: 5D                                    pop bp
[ 205]        :                                       
[ 206]    0BB4: C3                                    ret
[ 207]        :                                       endp
[ 208]        :                                       
[ 209]    0BB5:                                       proc MoveCursor
[ 210]        :                                       ;  /**
[ 211]        :                                       ;  * proc moves cursor according to maze printing,
[ 212]        :                                       ;  * e.g: moves right by default, and down when printing the last
[ 213]        :                                       ;  * char of a line
[ 214]        :                                       ;  **/
[ 215]    0BB5: 55                                    push bp
[ 216]    0BB6: 8B EC                                 mov bp,sp
[ 217]        :                                       
[ 218]    0BB8: 50                                    push ax
[ 219]    0BB9: 53                                    push bx
[ 220]    0BBA: 51                                    push cx
[ 221]    0BBB: 52                                    push dx
[ 222]        :                                       
[ 223]        :                                       
[ 224]    0BBC: B4 03                                 mov ah, 03h
[ 225]    0BBE: CD 10                                 int 10h             ;get cursor position. uses bx,cx,dx
[ 226]        :                                       
[ 227]    0BC0: 80 FA 36                              cmp dl, 54          ;print new line after 55 chars
[ 228]    0BC3: 75 06                                 JNE NextCol
[ 229]        :                                       
[ 230]    0BC5: FE C6                                 inc dh              ;new line
[ 231]    0BC7: B2 00                                 mov dl, 0
[ 232]    0BC9: EB 02                                 JMP MC
[ 233]        :                                       
[ 234]    0BCB:                                       NextCol:
[ 235]    0BCB: FE C2                                 inc dl          ;move cursor foward
[ 236]        :                                       
[ 237]    0BCD:                                       MC:
[ 238]    0BCD: B7 00                                 mov bh, 0       ;page number
[ 239]    0BCF: B4 02                                 mov ah, 2
[ 240]    0BD1: CD 10                                 int 10h         ;set cursor position
[ 241]        :                                       
[ 242]    0BD3: 5A                                    pop dx
[ 243]    0BD4: 59                                    pop cx
[ 244]    0BD5: 5B                                    pop bx
[ 245]    0BD6: 58                                    pop ax
[ 246]        :                                       
[ 247]    0BD7: 5D                                    pop bp
[ 248]        :                                       
[ 249]    0BD8: C3                                    ret
[ 250]        :                                       endp
[ 251]        :                                       
[ 252]        :                                       
[ 253]    0BD9:                                       proc GetKeyStroke
[ 254]        :                                       ;  /**
[ 255]        :                                       ;  * proc reads keyboard key
[ 256]        :                                       ;  * clears buffer post reading
[ 257]        :                                       ;  * uses Halt proc to give 1 seconds delay
[ 258]        :                                       ;  *
[ 259]        :                                       ;  * lastest movement direction is kept on memory
[ 260]        :                                       ;  * and always used unless can't be used\newer direction
[ 261]        :                                       ;  * therefore Implementing a recursive-like approach
[ 262]        :                                       ;  **/
[ 263]    0BD9: 55                                    push bp
[ 264]    0BDA: 8B EC                                 mov bp, sp
[ 265]        :                                       
[ 266]    0BDC: 51                                    push cx
[ 267]    0BDD: 52                                    push dx
[ 268]        :                                       
[ 269]    0BDE: E8 44 00                              call Halt
[ 270]        :                                       
[ 271]    0BE1: B4 01                                 mov ah, 01h
[ 272]    0BE3: CD 16                                 int 16h        ;read from buffer
[ 273]        :                                       
[ 274]    0BE5: 74 36                                 JZ NoStroke    ; if ZF = 1, no keystroke was entered, required?
[ 275]        :                                       
[ 276]    0BE7: 80 3E 15 0A 4E                        cmp LastMove, 'N'
[ 277]        :                                       
[ 278]    0BEC: 80 FC 48                              cmp ah, 48h    ;up key was pressed
[ 279]    0BEF: 74 0F                                 JE Up
[ 280]        :                                       
[ 281]    0BF1: 80 FC 4D                              cmp ah , 4Dh   ;right key was pressed
[ 282]    0BF4: 74 0E                                 JE Right
[ 283]        :                                       
[ 284]    0BF6: 80 FC 50                              cmp ah, 50h    ;down key was pressed
[ 285]    0BF9: 74 0D                                 JE Down
[ 286]        :                                       
[ 287]    0BFB: 80 FC 4B                              cmp ah, 4bh    ;left key was presses
[ 288]    0BFE: 74 0C                                 JE Left
[ 289]        :                                       
[ 290]        :                                       ;not required, debug and simplifaction only!
[ 291]    0C00:                                       Up:
[ 292]    0C00: B4 55                                 mov ah, 'U'
[ 293]    0C02: EB 0C                                 JMP ContGK
[ 294]        :                                       
[ 295]    0C04:                                       Right:
[ 296]    0C04: B4 52                                 mov ah, 'R'
[ 297]    0C06: EB 08                                 JMP ContGK
[ 298]        :                                       
[ 299]    0C08:                                       Down:
[ 300]    0C08: B4 44                                 mov ah, 'D'
[ 301]    0C0A: EB 04                                 JMP ContGK
[ 302]        :                                       
[ 303]    0C0C:                                       Left:
[ 304]    0C0C: B4 4C                                 mov ah, 'L'
[ 305]    0C0E: EB 00                                 JMP ContGK
[ 306]        :                                       
[ 307]    0C10:                                       ContGK:
[ 308]        :                                       
[ 309]    0C10: 88 26 15 0A                           mov LastMove, ah ;saves movement
[ 310]    0C14: 50                                    push ax
[ 311]    0C15: B8 00 0C                              mov ax, 0c00h    ;ah = 0ch, al = 00h, so no input is attempted by int
[ 312]    0C18: CD 21                                 int 21h          ;flushes keyboard buffer
[ 313]    0C1A: 58                                    pop ax
[ 314]    0C1B: EB 04                                 JMP FinishGK
[ 315]        :                                       
[ 316]    0C1D:                                       NoStroke:
[ 317]    0C1D: 8A 26 15 0A                           mov ah, LastMove
[ 318]        :                                       
[ 319]    0C21:                                       FinishGK:
[ 320]        :                                       
[ 321]    0C21: 5A                                    pop dx
[ 322]    0C22: 59                                    pop cx
[ 323]        :                                       
[ 324]    0C23: 5D                                    pop bp
[ 325]        :                                       
[ 326]    0C24: C3                                    ret
[ 327]        :                                       
[ 328]        :                                       endp
[ 329]        :                                       
[ 330]    0C25:                                       proc Halt
[ 331]        :                                       ;  /**
[ 332]        :                                       ;  * proc delays programs by 1 sec
[ 333]        :                                       ;  * uses system times to measure time
[ 334]        :                                       ;  * system time is in clicks, ~18 clicks = 1 second
[ 335]        :                                       ;  **/
[ 336]        :                                       
[ 337]    0C25: 55                                    push bp
[ 338]    0C26: 8B EC                                 mov bp, sp
[ 339]        :                                       
[ 340]    0C28: 50                                    push ax
[ 341]    0C29: 53                                    push bx
[ 342]    0C2A: 51                                    push cx
[ 343]    0C2B: 52                                    push dx
[ 344]        :                                       
[ 345]    0C2C: B4 00                                 mov ah, 00h
[ 346]    0C2E: CD 1A                                 int 1ah      ;get system time -> CX:DX, ~18 clicks = 1 second
[ 347]        :                                       
[ 348]    0C30: 8B DA                                 mov bx, dx   ; keep starting time
[ 349]        :                                       
[ 350]    0C32:                                       Counter:
[ 351]    0C32: CD 1A                                 int 1ah      ;get system time
[ 352]    0C34: 2B D3                                 sub dx, bx
[ 353]    0C36: 83 FA 0C                              cmp dx, 12   ;12 clicks ~ 2/3 second
[ 354]    0C39: 7C F7                                 JNGE Counter ;if dx !>= 19
[ 355]        :                                       
[ 356]    0C3B: 5A                                    pop dx
[ 357]    0C3C: 59                                    pop cx
[ 358]    0C3D: 5B                                    pop bx
[ 359]    0C3E: 58                                    pop ax
[ 360]        :                                       
[ 361]    0C3F: 5D                                    pop bp
[ 362]        :                                       
[ 363]    0C40: C3                                    ret
[ 364]        :                                       endp
[ 365]        :                                       
[ 366]    0C41:                                       proc PlayerMove
[ 367]        :                                       ;  /**
[ 368]        :                                       ;  * proc moves pacman spirit
[ 369]        :                                       ;  * gets movement direction with GetKeyStroke
[ 370]        :                                       ;  * checks validity of movement with SetCourse and CheckLocation
[ 371]        :                                       ;  *
[ 372]        :                                       ;  * proc's input: last direction of movement (AH), output: new direction of movement
[ 373]        :                                       ;  **/
[ 374]        :                                       
[ 375]    0C41: 55                                    push bp
[ 376]    0C42: 8B EC                                 mov bp, sp
[ 377]        :                                       
[ 378]        :                                       ;push ax
[ 379]    0C44: 53                                    push bx
[ 380]    0C45: 51                                    push cx
[ 381]    0C46: 52                                    push dx
[ 382]        :                                       
[ 383]    0C47: 8A 36 13 0A                           mov dh, PlayerRow   ;sets dx as pacman's new position
[ 384]    0C4B: 8A 16 14 0A                           mov dl, PlayerCol
[ 385]        :                                       
[ 386]    0C4F: B4 02                                 mov ah, 2
[ 387]    0C51: CD 10                                 int 10h             ;sets cursor at pacma's current location
[ 388]        :                                       
[ 389]    0C53: E8 83 FF                              call GetKeyStroke   ;returns in AH which key was pressed (Up\Right\Down\Left)
[ 390]    0C56: 50                                    push ax             ;save AX for after pacman spirit deletion
[ 391]        :                                       
[ 392]    0C57: B0 20                                 mov al, ' '
[ 393]    0C59: B3 00                                 mov bl, 00h         ;set color to black
[ 394]    0C5B: B7 00                                 mov bh, 0           ;set page 0
[ 395]    0C5D: B9 01 00                              mov cx, 1           ;print ' ' only once
[ 396]        :                                       
[ 397]    0C60: B4 09                                 mov ah, 09h
[ 398]    0C62: CD 10                                 int 10h             ;remove pacman spirit from maze
[ 399]        :                                       
[ 400]    0C64: 58                                    pop ax              ;retrieves AX
[ 401]        :                                       
[ 402]    0C65: E8 2E 00                              call SetCourse      ;sets cursor at desired coordinates
[ 403]        :                                       ;call CheckPosition  ;checks desired coordinates for game elements (walls, points, ghosts...)
[ 404]        :                                       ;iff walls returns W, points  P (at AH)  >>Include in SetCourse<<
[ 405]    0C68: 3C 2E                                 cmp al, '.'         ;if point
[ 406]    0C6A: 74 02                                 JE PointsEarned
[ 407]        :                                       
[ 408]    0C6C: EB 08                                 JMP Normal
[ 409]        :                                       
[ 410]    0C6E:                                       PointsEarned:
[ 411]    0C6E: A0 26 0A                              mov al, Points
[ 412]    0C71: FE C8                                 dec al
[ 413]    0C73: A2 26 0A                              mov Points, al
[ 414]        :                                       
[ 415]    0C76:                                       Normal:
[ 416]        :                                       
[ 417]    0C76: 8A 36 13 0A                           mov dh, PlayerRow   ;sets dx as pacman's new position
[ 418]    0C7A: 8A 16 14 0A                           mov dl, PlayerCol
[ 419]        :                                       
[ 420]    0C7E: 50                                    push ax             ;saves AX so last direction of movement will be kept
[ 421]        :                                       
[ 422]    0C7F: B4 02                                 mov ah, 2
[ 423]    0C81: CD 10                                 int 10h             ;re-sets cursor position verfied location
[ 424]        :                                       
[ 425]    0C83: B0 40                                 mov al, '@'         ;sets pacman spirit
[ 426]    0C85: B3 0C                                 mov bl, 0ch         ;sets color to light red
[ 427]    0C87: B7 00                                 mov bh, 0           ;sets page to 0
[ 428]    0C89: B9 01 00                              mov cx, 1           ;print pacman only once
[ 429]        :                                       
[ 430]    0C8C: B4 09                                 mov ah, 09h
[ 431]    0C8E: CD 10                                 int 10h             ;re-place pacman spirit at maze
[ 432]        :                                       
[ 433]    0C90: 58                                    pop ax              ;retrieves  AX (last direction of movement)
[ 434]        :                                       
[ 435]    0C91:                                       SkipMovement:
[ 436]        :                                       
[ 437]    0C91: 5A                                    pop dx
[ 438]    0C92: 59                                    pop cx
[ 439]    0C93: 5B                                    pop bx
[ 440]        :                                       ;pop ax
[ 441]        :                                       
[ 442]    0C94: 5D                                    pop bp
[ 443]        :                                       
[ 444]    0C95: C3                                    ret
[ 445]        :                                       endp
[ 446]        :                                       
[ 447]    0C96:                                       proc SetCourse
[ 448]        :                                       ;  /**
[ 449]        :                                       ;  * proc sets cursor at desired location,
[ 450]        :                                       ;  * checks if movememt s vaild, and updates pacman's Cords
[ 451]        :                                       ;  **/
[ 452]        :                                       
[ 453]    0C96: 55                                    push bp
[ 454]    0C97: 8B EC                                 mov bp, sp
[ 455]        :                                       
[ 456]    0C99: 53                                    push bx
[ 457]    0C9A: 52                                    push dx
[ 458]        :                                       
[ 459]    0C9B: B7 00                                 mov bh, 0         ;sets page to 0
[ 460]        :                                       
[ 461]    0C9D: 8A 36 13 0A                           mov dh, PlayerRow ;sets dx as pacman's position
[ 462]    0CA1: 8A 16 14 0A                           mov dl, PlayerCol
[ 463]        :                                       
[ 464]    0CA5: 80 FC 55                              cmp ah, 'U'
[ 465]    0CA8: 74 11                                 JE SCUp
[ 466]    0CAA: 80 FC 52                              cmp ah, 'R'
[ 467]    0CAD: 74 10                                 JE SCRight
[ 468]    0CAF: 80 FC 44                              cmp ah, 'D'
[ 469]    0CB2: 74 0F                                 JE SCDown
[ 470]    0CB4: 80 FC 4C                              cmp ah, 'L'
[ 471]    0CB7: 74 0E                                 JE SCLeft
[ 472]        :                                       
[ 473]    0CB9: EB 0E                                 JMP ContSC
[ 474]        :                                       
[ 475]    0CBB:                                       SCUp:
[ 476]    0CBB: FE CE                                 dec dh
[ 477]    0CBD: EB 0A                                 JMP ContSC
[ 478]    0CBF:                                       SCRight:
[ 479]    0CBF: FE C2                                 inc dl
[ 480]    0CC1: EB 06                                 JMP ContSC
[ 481]    0CC3:                                       SCDown:
[ 482]    0CC3: FE C6                                 inc dh
[ 483]    0CC5: EB 02                                 JMP ContSC
[ 484]    0CC7:                                       SCLeft:
[ 485]    0CC7: FE CA                                 dec dl
[ 486]        :                                       
[ 487]    0CC9:                                       ContSC:
[ 488]    0CC9: 50                                    push ax             ;maintains ax
[ 489]    0CCA: B4 02                                 mov ah, 2
[ 490]    0CCC: CD 10                                 int 10h             ;sets cursor position at desired location
[ 491]        :                                       
[ 492]    0CCE: E8 19 00                              call CheckLocation  ;checks coordinates for game elements
[ 493]        :                                       ;returns char at AL, attribute at AH
[ 494]        :                                       
[ 495]    0CD1: 3C 23                                 cmp al, '#'         ; if wall denies movement in desired direction
[ 496]    0CD3: 74 0B                                 JE RejectNewCords
[ 497]        :                                       
[ 498]    0CD5: 58                                    pop ax              ;retrieves ax
[ 499]        :                                       
[ 500]    0CD6: 88 36 13 0A                           mov PlayerRow ,dh
[ 501]    0CDA: 88 16 14 0A                           mov PlayerCol ,dl   ;updates pacman's position
[ 502]        :                                       
[ 503]    0CDE: EB 06                                 JMP FinishSC
[ 504]        :                                       
[ 505]    0CE0:                                       RejectNewCords:
[ 506]    0CE0: C6 06 15 0A 4E                        mov LastMove, 'N'
[ 507]        :                                       
[ 508]        :                                       ;mov dh, PlayerRow
[ 509]        :                                       ;mov dl, PlayerCol
[ 510]        :                                       
[ 511]        :                                       ;mov ah, 2
[ 512]        :                                       ;int 10h         ;re-position cursor on pacman
[ 513]        :                                       
[ 514]    0CE5: 58                                    pop ax
[ 515]        :                                       
[ 516]    0CE6:                                       FinishSC:
[ 517]    0CE6: 5A                                    pop dx
[ 518]    0CE7: 5B                                    pop bx
[ 519]        :                                       
[ 520]    0CE8: 5D                                    pop bp
[ 521]        :                                       
[ 522]    0CE9: C3                                    ret
[ 523]        :                                       endp
[ 524]        :                                       
[ 525]    0CEA:                                       proc CheckLocation
[ 526]        :                                       ;  /**
[ 527]        :                                       ;  * proc returns data about current cursor location
[ 528]        :                                       ;  * char at AL, attribute at AH
[ 529]        :                                       ;  **/
[ 530]    0CEA: 55                                    push bp
[ 531]    0CEB: 8B EC                                 mov bp,sp
[ 532]        :                                       
[ 533]    0CED: 53                                    push bx
[ 534]        :                                       
[ 535]    0CEE: B7 00                                 mov bh, 0     ;sets page to 0
[ 536]    0CF0: B4 08                                 mov ah, 08h   ;reads data of cursor location
[ 537]    0CF2: CD 10                                 int 10h       ;stores char at AL, attribute at AH
[ 538]        :                                       
[ 539]    0CF4: 5B                                    pop bx
[ 540]        :                                       
[ 541]    0CF5: 5D                                    pop bp
[ 542]        :                                       
[ 543]    0CF6: C3                                    ret
[ 544]        :                                       endp
[ 545]        :                                       
[ 546]    0CF7:                                       proc AIMove
[ 547]    0CF7: 55                                    push bp
[ 548]    0CF8: 8B EC                                 mov bp, sp
[ 549]        :                                       
[ 550]    0CFA: 52                                    push dx
[ 551]    0CFB: 56                                    push si
[ 552]        :                                       
[ 553]    0CFC: BE 00 00                              mov si, 0
[ 554]        :                                       
[ 555]    0CFF:                                       AIs:
[ 556]    0CFF: 8A B4 16 0A                           mov dh, AIRow[si]
[ 557]    0D03: 8A 94 1A 0A                           mov dl, AICol[si]  ;AI's cords
[ 558]        :                                       
[ 559]    0D07: E8 F5 00                              call AIDelete
[ 560]    0D0A: E8 0D 00                              call AICrawl
[ 561]    0D0D: E8 13 01                              call PlaceAI
[ 562]        :                                       
[ 563]    0D10: 46                                    inc si
[ 564]    0D11: 83 FE 04                              cmp si, 04h
[ 565]    0D14: 75 E9                                 JNE AIs
[ 566]        :                                       
[ 567]    0D16: 5E                                    pop si
[ 568]    0D17: 5A                                    pop dx
[ 569]        :                                       
[ 570]    0D18: 5D                                    pop bp
[ 571]        :                                       
[ 572]    0D19: C3                                    ret
[ 573]        :                                       endp
[ 574]        :                                       
[ 575]    0D1A:                                       proc AICrawl
[ 576]        :                                       ;  /**
[ 577]        :                                       ;  * proc checks if certain AI can move
[ 578]        :                                       ;  * up, down, left or right
[ 579]        :                                       ;  * if more than 2 direction are avilable or lastest movement
[ 580]        :                                       ;  * direction is unavilable a new direction of movement will be genrated
[ 581]        :                                       ;  *
[ 582]        :                                       ;  * BL binary key of possbile directions, BH number of possible directions
[ 583]        :                                       ;  *
[ 584]        :                                       ;  * proc recives current AI on SI, and his cords on DX
[ 585]        :                                       ;  * proc returns new good cords for AI in DX
[ 586]        :                                       ;  **/
[ 587]    0D1A: 55                                    push bp
[ 588]    0D1B: 8B EC                                 mov bp ,sp
[ 589]        :                                       
[ 590]    0D1D: 50                                    push ax
[ 591]    0D1E: 53                                    push bx
[ 592]        :                                       
[ 593]    0D1F: BB 00 00                              mov bx, 0
[ 594]        :                                       
[ 595]    0D22: FE CE                                 dec dh
[ 596]    0D24: B4 02                                 mov ah, 2
[ 597]    0D26: CD 10                                 int 10h             ;position cursor above AI
[ 598]        :                                       
[ 599]    0D28: E8 BF FF                              call CheckLocation  ;stores char at AL, attribute at AH
[ 600]    0D2B: 3C 23                                 cmp al, '#'
[ 601]    0D2D: 74 05                                 JE UpBlock
[ 602]    0D2F: 80 C3 01                              add bl, 00000001b   ;up is good
[ 603]    0D32: FE C7                                 inc bh
[ 604]    0D34:                                       UpBlock:
[ 605]    0D34: FE C6                                 inc dh              ;return to orignial cords
[ 606]        :                                       
[ 607]        :                                       
[ 608]    0D36: FE C2                                 inc dl
[ 609]    0D38: B4 02                                 mov ah, 2
[ 610]    0D3A: CD 10                                 int 10h             ;position cursor right to AI
[ 611]        :                                       
[ 612]    0D3C: E8 AB FF                              call CheckLocation  ;stores char at AL, attribute at AH
[ 613]    0D3F: 3C 23                                 cmp al, '#'
[ 614]    0D41: 74 05                                 JE RightBlock
[ 615]    0D43: 80 C3 02                              add bl, 00000010b   ;right is good
[ 616]    0D46: FE C7                                 inc bh
[ 617]    0D48:                                       RightBlock:
[ 618]    0D48: FE CA                                 dec dl
[ 619]        :                                       
[ 620]        :                                       
[ 621]    0D4A: FE C6                                 inc dh
[ 622]    0D4C: B4 02                                 mov ah, 2
[ 623]    0D4E: CD 10                                 int 10h             ;position cursor below to AI
[ 624]        :                                       
[ 625]    0D50: E8 97 FF                              call CheckLocation  ;stores char at AL, attribute at AH
[ 626]    0D53: 3C 23                                 cmp al, '#'
[ 627]    0D55: 74 05                                 JE DownBlock
[ 628]    0D57: 80 C3 04                              add bl, 00000100b   ;down is good
[ 629]    0D5A: FE C7                                 inc bh
[ 630]    0D5C:                                       DownBlock:
[ 631]    0D5C: FE CE                                 dec dh
[ 632]        :                                       
[ 633]        :                                       
[ 634]    0D5E: FE CA                                 dec dl
[ 635]    0D60: B4 02                                 mov ah, 2
[ 636]    0D62: CD 10                                 int 10h             ;position cursor left to AI
[ 637]        :                                       
[ 638]    0D64: E8 83 FF                              call CheckLocation  ;stores char at AL, attribute at AH
[ 639]    0D67: 3C 23                                 cmp al, '#'
[ 640]    0D69: 74 05                                 JE LeftBlock
[ 641]    0D6B: 80 C3 08                              add bl, 00001000b   ;left is good
[ 642]    0D6E: FE C7                                 inc bh
[ 643]    0D70:                                       LeftBlock:
[ 644]    0D70: FE C2                                 inc dl
[ 645]        :                                       
[ 646]    0D72: 80 FF 03                              cmp bh, 3           ;if we are on a crossing (e.g 3 pathes)
[ 647]    0D75: 7D 0C                                 JGE NewMove
[ 648]        :                                       ;try changing direction
[ 649]        :                                       
[ 650]    0D77: 53                                    push bx
[ 651]    0D78: 22 9C 1E 0A                           and bl, LastAIMove[si]
[ 652]    0D7C: 3A 9C 1E 0A                           cmp bl, LastAIMove[si]
[ 653]    0D80: 5B                                    pop bx
[ 654]    0D81: 74 57                                 JE LastMoveGood          ;can move in last direction
[ 655]        :                                       
[ 656]    0D83:                                       NewMove:
[ 657]    0D83: 52                                    push dx
[ 658]    0D84: E8 BF 00                              call RandomGen
[ 659]        :                                       
[ 660]    0D87: 83 FA 00                              cmp dx, 0
[ 661]    0D8A: 74 12                                 JE TryUp         ;up was randomised
[ 662]    0D8C: 83 FA 01                              cmp dx, 1
[ 663]    0D8F: 74 1C                                 JE TryRight      ;right was randomised
[ 664]    0D91: 83 FA 02                              cmp dx, 2
[ 665]    0D94: 74 26                                 JE TryDown       ;down was randomised
[ 666]    0D96: 83 FA 03                              cmp dx, 3
[ 667]    0D99: 74 30                                 JE TryLeft       ;left was randomised
[ 668]        :                                       
[ 669]    0D9B: 5A                                    pop dx
[ 670]    0D9C: EB E5                                 JMP NewMove      ;fail-safe, incase of bad random number
[ 671]        :                                       
[ 672]    0D9E:                                       TryUp:
[ 673]    0D9E: 5A                                    pop dx
[ 674]    0D9F: 53                                    push bx
[ 675]    0DA0: 80 E3 01                              and bl, 00000001b    ;check if up direction is possible
[ 676]    0DA3: 80 FB 01                              cmp bl, 00000001b
[ 677]    0DA6: 5B                                    pop bx
[ 678]    0DA7: 75 DA                                 JNE NewMove
[ 679]    0DA9: FE CE                                 dec dh               ;set new position
[ 680]        :                                       
[ 681]    0DAB: EB 46                                 JMP GoodNewMove
[ 682]        :                                       
[ 683]    0DAD:                                       TryRight:
[ 684]    0DAD: 5A                                    pop dx
[ 685]    0DAE: 53                                    push bx
[ 686]    0DAF: 80 E3 02                              and bl, 00000010b    ;check if right direction is possible
[ 687]    0DB2: 80 FB 02                              cmp bl, 00000010b
[ 688]    0DB5: 5B                                    pop bx
[ 689]    0DB6: 75 CB                                 JNE NewMove
[ 690]    0DB8: FE C2                                 inc dl               ;set new position
[ 691]        :                                       
[ 692]    0DBA: EB 37                                 JMP GoodNewMove
[ 693]        :                                       
[ 694]    0DBC:                                       TryDown:
[ 695]    0DBC: 5A                                    pop dx
[ 696]    0DBD: 53                                    push bx
[ 697]    0DBE: 80 E3 04                              and bl, 00000100b    ;check if down direction is possible
[ 698]    0DC1: 80 FB 04                              cmp bl, 00000100b
[ 699]    0DC4: 5B                                    pop bx
[ 700]    0DC5: 75 BC                                 JNE NewMove
[ 701]    0DC7: FE C6                                 inc dh               ;set new position
[ 702]        :                                       
[ 703]    0DC9: EB 28                                 JMP GoodNewMove
[ 704]        :                                       
[ 705]    0DCB:                                       TryLeft:
[ 706]    0DCB: 5A                                    pop dx
[ 707]    0DCC: 53                                    push bx
[ 708]    0DCD: 80 E3 08                              and bl, 00001000b    ;check if left direction is possible
[ 709]    0DD0: 80 FB 08                              cmp bl, 00001000b
[ 710]    0DD3: 5B                                    pop bx
[ 711]    0DD4: 75 AD                                 JNE NewMove
[ 712]    0DD6: FE CA                                 dec dl               ;set new position
[ 713]        :                                       
[ 714]    0DD8: EB 19                                 JMP GoodNewMove
[ 715]        :                                       
[ 716]        :                                       
[ 717]    0DDA:                                       LastMoveGood:        ;intrdouces double checking, but reduces code required
[ 718]    0DDA: 52                                    push dx              ;not required, only used to keep stack correct due to Try*
[ 719]    0DDB: 8A 9C 1E 0A                           mov bl, LastAIMove[si]
[ 720]        :                                       
[ 721]    0DDF: 80 FB 01                              cmp bl, 00000001b    ;check if last direction was up
[ 722]    0DE2: 74 BA                                 JE TryUp
[ 723]        :                                       
[ 724]    0DE4: 80 FB 02                              cmp bl, 00000010b    ;check if last direction was right
[ 725]    0DE7: 74 C4                                 JE TryRight
[ 726]        :                                       
[ 727]    0DE9: 80 FB 04                              cmp bl, 00000100b    ;check if last direction was down
[ 728]    0DEC: 74 CE                                 JE TryDown
[ 729]        :                                       
[ 730]    0DEE: 80 FB 08                              cmp bl, 00001000b    ;check if last direction was left
[ 731]    0DF1: 74 D8                                 JE TryLeft
[ 732]        :                                       
[ 733]    0DF3:                                       GoodNewMove:
[ 734]    0DF3: 88 B4 16 0A                           mov AIRow[si], dh
[ 735]    0DF7: 88 94 1A 0A                           mov AICol[si], dl
[ 736]        :                                       
[ 737]    0DFB: 5B                                    pop bx
[ 738]    0DFC: 58                                    pop ax
[ 739]        :                                       
[ 740]    0DFD: 5B                                    pop bx
[ 741]    0DFE: C3                                    ret
[ 742]        :                                       endp
[ 743]        :                                       
[ 744]    0DFF:                                       proc AIDelete
[ 745]        :                                       ;  /**
[ 746]        :                                       ;  * proc removes AI spirit from board,
[ 747]        :                                       ;  * and re-print the block the exsited on the cords
[ 748]        :                                       ;  *
[ 749]        :                                       ;  * proc recives current AI on SI, and his cords on DX
[ 750]        :                                       ;  **/
[ 751]    0DFF: 55                                    push bp
[ 752]    0E00: 8B EC                                 mov bp, sp
[ 753]        :                                       
[ 754]    0E02: 50                                    push ax
[ 755]    0E03: 53                                    push bx
[ 756]    0E04: 51                                    push cx
[ 757]        :                                       
[ 758]    0E05: B7 00                                 mov bh, 0                ;set page
[ 759]    0E07: B4 02                                 	mov ah, 2
[ 760]    0E09: CD 10                                 	int 10h                  ;sets cursor on current AI position
[ 761]        :                                       
[ 762]    0E0B: 8A 84 22 0A                           mov al, LastOn[si]
[ 763]        :                                       
[ 764]    0E0F: 3C 2E                                 cmp al, '.'              ;checks what was on the block before
[ 765]    0E11: 74 00                                 JE RetYellow             ;and colors it accordingly
[ 766]        :                                       
[ 767]        :                                       
[ 768]    0E13:                                       RetYellow:
[ 769]    0E13: B3 0E                                 mov bl, 0eh      ;set color yellow
[ 770]    0E15: EB 00                                 JMP ResumeDelete
[ 771]        :                                       
[ 772]    0E17:                                       ResumeDelete:
[ 773]    0E17: B9 01 00                              mov cx, 1                ;print only once
[ 774]    0E1A: B4 09                                 mov ah, 09h              ;prints stepped-on-block back
[ 775]    0E1C: CD 10                                 int 10h
[ 776]        :                                       
[ 777]    0E1E: 59                                    pop cx
[ 778]    0E1F: 5B                                    pop bx
[ 779]    0E20: 58                                    pop ax
[ 780]        :                                       
[ 781]    0E21: 5D                                    pop bp
[ 782]        :                                       
[ 783]    0E22: C3                                    ret
[ 784]        :                                       endp
[ 785]        :                                       
[ 786]    0E23:                                       proc PlaceAI
[ 787]        :                                       ;  /**
[ 788]        :                                       ;  * proc places AI's spirit on it's new location,
[ 789]        :                                       ;  * and saves the block the AI is stepping on
[ 790]        :                                       ;  *
[ 791]        :                                       ;  * proc recives current AI on SI, and his new cords on DX
[ 792]        :                                       ;  **/
[ 793]        :                                       
[ 794]    0E23: 55                                    push bp
[ 795]    0E24: 8B EC                                 mov bp, sp
[ 796]        :                                       
[ 797]    0E26: 50                                    push ax
[ 798]    0E27: 53                                    push bx
[ 799]    0E28: 51                                    push cx
[ 800]        :                                       
[ 801]    0E29: B7 00                                 mov bh, 0                ;set page
[ 802]    0E2B: B4 02                                 	mov ah, 2
[ 803]    0E2D: CD 10                                 	int 10h                  ;sets cursor on next AI position
[ 804]        :                                       	
[ 805]    0E2F: E8 B8 FE                              	call CheckLocation       ;reads current position data (al=char, ah=artb)
[ 806]        :                                       	
[ 807]    0E32: 88 84 22 0A                           	mov LastOn[si], al       ;stores stepped-on block for future retrieval
[ 808]        :                                       	
[ 809]    0E36: B0 26                                 mov al, '&'
[ 810]    0E38: B3 0D                                 mov bl, 0dh              ;set color light magneta
[ 811]    0E3A: B9 01 00                              mov cx, 1                ;print only once
[ 812]        :                                       
[ 813]    0E3D: B4 09                                 mov ah, 09h
[ 814]    0E3F: CD 10                                 int 10h                  ;print AI spirit
[ 815]        :                                       
[ 816]    0E41: 59                                    pop cx
[ 817]    0E42: 5B                                    pop bx
[ 818]    0E43: 58                                    pop ax
[ 819]        :                                       
[ 820]    0E44: 5D                                    pop bp
[ 821]        :                                       
[ 822]    0E45: C3                                    ret
[ 823]        :                                       endp
[ 824]        :                                       
[ 825]    0E46:                                       proc RandomGen
[ 826]        :                                       ;  /**
[ 827]        :                                       ;  * proc genrate pseudorandom numbers using XORshift
[ 828]        :                                       ;  * http://en.wikipedia.org/wiki/Xorshift
[ 829]        :                                       ;  * re-implmanted for 16-bit (see xorshift.c)
[ 830]        :                                       ;  * Random numbers range from 0-3, and returned in dx
[ 831]        :                                       ;  * ^ - XOR, >>/<< shift
[ 832]        :                                       ;  **/
[ 833]        :                                       
[ 834]    0E46: 55                                    push bp
[ 835]    0E47: 8B EC                                 mov bp, sp
[ 836]        :                                       
[ 837]    0E49: 50                                    push ax
[ 838]    0E4A: 53                                    push bx
[ 839]    0E4B: 51                                    push cx
[ 840]    0E4C: 56                                    push si
[ 841]        :                                       
[ 842]    0E4D: B4 00                                 mov ah, 0     ;gets system time
[ 843]    0E4F: CD 1A                                 int 1ah       ;populate AX (x), CX (z) and DX (w) with differnt values each call
[ 844]    0E51: BB 00 01                              mov bx, 256   ;y - arbitrary picked
[ 845]    0E54: BE 00 00                              mov si, 0     ;t - value holder
[ 846]        :                                       
[ 847]        :                                       
[ 848]        :                                       
[ 849]    0E57: 8B F0                                 mov si, ax
[ 850]    0E59: D1 E0 D1 E0 D1 E0 D1 E0 D1 E0 D1 E0   shl ax, 11   ;x ^ (x << 11)
                D1 E0 D1 E0 D1 E0 D1 E0 D1 E0       
[ 851]    0E6F: 33 F0                                 xor si, ax
[ 852]        :                                       
[ 853]    0E71: 8B C3                                 mov ax, bx   ;x = y
[ 854]    0E73: 8B D9                                 mov bx, cx   ;y = z
[ 855]    0E75: 8B CA                                 mov cx, dx   ;z = w
[ 856]        :                                       
[ 857]    0E77: 8B C2                                 mov ax, dx
[ 858]    0E79: D1 E8 D1 E8 D1 E8 D1 E8 D1 E8 D1 E8   shr ax, 19   ;w ^ (w >> 19)
                D1 E8 D1 E8 D1 E8 D1 E8 D1 E8 D1 E8 
                D1 E8 D1 E8 D1 E8 D1 E8 D1 E8 D1 E8 
                D1 E8                               
[ 859]    0E9F: 33 D0                                 xor dx, ax
[ 860]        :                                       
[ 861]    0EA1: 33 D6                                 xor dx, si   ;...^ t
[ 862]        :                                       
[ 863]    0EA3: 8B C6                                 mov ax, si
[ 864]    0EA5: D1 E8 D1 E8 D1 E8 D1 E8 D1 E8 D1 E8   shr ax, 8    ;...^ (t >> 8)
                D1 E8 D1 E8                         
[ 865]    0EB5: 33 D0                                 xor dx, ax
[ 866]        :                                       
[ 867]    0EB7: E8 06 00                              call Mod
[ 868]        :                                       
[ 869]    0EBA: 5E                                    pop si
[ 870]    0EBB: 59                                    pop cx
[ 871]    0EBC: 5B                                    pop bx
[ 872]    0EBD: 58                                    pop ax
[ 873]        :                                       
[ 874]    0EBE: 5D                                    pop bp
[ 875]        :                                       
[ 876]    0EBF: C3                                    ret
[ 877]        :                                       endp
[ 878]        :                                       
[ 879]    0EC0:                                       proc Mod
[ 880]        :                                       ;  /**
[ 881]        :                                       ;  * proc preforms modulo by 4 for DX (needs to be passed by caller)
[ 882]        :                                       ;  * returns moduled value in dx
[ 883]        :                                       ;  *
[ 884]        :                                       ;  * Due the large numbers divison take place on a 32-bit
[ 885]        :                                       ;  * REG, to eliminate risk of overflow
[ 886]        :                                       ;  **/
[ 887]    0EC0: 55                                    push bp
[ 888]    0EC1: 8B EC                                 mov bp, sp
[ 889]        :                                       
[ 890]    0EC3: 50                                    push ax
[ 891]    0EC4: 53                                    push bx
[ 892]        :                                       
[ 893]    0EC5: 8B C2                                 mov ax, dx  ;ax is the less significant
[ 894]    0EC7: BA 00 00                              mov dx, 0
[ 895]    0ECA: BB 04 00                              mov bx, 4
[ 896]        :                                       
[ 897]    0ECD: F7 F3                                 div bx      ;dl contains the divisor
[ 898]        :                                       ;reminder of divison is kept in DX
[ 899]        :                                       
[ 900]    0ECF: 5D                                    pop bp
[ 901]        :                                       
[ 902]    0ED0: 5B                                    pop bx
[ 903]    0ED1: 58                                    pop ax
[ 904]    0ED2: C3                                    ret
[ 905]        :                                       endp
[ 906]        :                                       ends
[ 907]        :                                       
[ 908]        :                                       end start ; set entry point and stop the assembler.
[ 909]        :                                       
 
===================================================================================================
 
EXE HEADER - bytes from 0000 to 01FF inclusive.

0000: 4D      -   exe signature (M)
0001: 5A      -   exe signature (Z)
0002: D3      -   bytes on last page (l.byte)
0003: 00      -   bytes on last page (h.byte)
0004: 09      -   512 byte pages in file (l.byte)
0005: 00      -   512 byte pages in file (h.byte)
0006: 01      -   relocations (l.byte)
0007: 00      -   relocations (h.byte)
0008: 20      -   paragraphs in header (l.byte)
0009: 00      -   paragraphs in header (h.byte)
000A: 00      -   minimum memory (l.byte)
000B: 00      -   minimum memory (h.byte)
000C: FF      -   maximum memory (l.byte)
000D: FF      -   maximum memory (h.byte)
000E: A3      -   SS - stack segment (l.byte)
000F: 00      -   SS - stack segment (h.byte)
0010: 00      -   SP - stack pointer (l.byte)
0011: 01      -   SP - stack pointer (h.byte)
0012: 16      -   check sum (l.byte)
0013: D6      -   check sum (h.byte)
0014: 00      -   IP - instruction pointer (l.byte)
0015: 00      -   IP - instruction pointer (h.byte)
0016: B3      -   CS - code segment (l.byte)
0017: 00      -   CS - code segment (h.byte)
0018: 1E      -   relocation table adress (l.byte)
0019: 00      -   relocation table adress (h.byte)
001A: 00      -   overlay number (l.byte)
001B: 00      -   overlay number (h.byte)
001C: 01      -   signature (l.byte)
001D: 00      -   signature (h.byte)
001E: 01      -   relocation table - offset inside segment (l.byte)
001F: 00      -   relocation table - offset inside segment (h.byte)
0020: B3      -   relocation table - segment anchor (l.byte)
0021: 00      -   relocation table - segment anchor (h.byte)
0022 to 01FF  -   reserved relocation area  (00) 




===================================================================================================
